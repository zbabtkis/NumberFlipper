(function(a){"use strict";var b=function(a){var c=" ";return a.isNF=!0,a.addClass=function(b){var d=a.className?c:"";return a.className.match(b)||(this.className=this.className+d+b),this},a.removeClass=function(a){return this.className.replace(c+a,""),this.className.replace(a,""),this},a.remove=function(){return this.parentNode&&this.parentNode.removeChild(a),this},a.hide=function(){return this.style.display="none",this},a.append=function(a){return this.appendChild(a),this},a.appendTo=function(a){return this.remove(),a.append(this),this},a.prependTo=function(a){return this.remove(),a.children[0]?a.insertBefore(this,a.children[0]):this.appendTo(a),this},a.show=function(){return this.style.display="block",this},a.css=function(a,c){function d(a){var c=a.split("-"),d="";return b.each(c,function(a,b){0===a||1===a&&""===c[0]?d+=b.toLowerCase():(d+=b.slice(0,1).toUpperCase(),d+=b.slice(1).toLowerCase())}),d}function e(a,b){f.style[d(a)]=b}var f=this;return"string"==typeof a?e(a,c):"object"==typeof a&&b.each(a,e),this},a.html=function(a){return this.innerHTML=a,this},a.text=function(a){var b=document.createTextNode(a);return this.html(""),this.append(b),this},a};b.each=function(a,b){for(var c=0,d=a.length;d>c;c++)b(c,a[c])},b.Deferred=function(){var a=[];return{promise:function(){return{then:function(b){a.push(b)}}},resolve:function(c){b.each(a,function(a,b){b(c)})}}},b.bind=function(a,b){var c=[].slice.call(arguments,2);return function(){c=c.concat([].slice.call(arguments,0)),a.apply(b,c)}},b.extend=function(a,b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c])},a.NumberFlipperEl=b}).call(this,this),function(a){"use strict";var b=a.NumberFlipperEl,c=function(a,d){this.el=a.isNF?a:new b(a),this.mf=d,this._domLayers=[],a.addClass("flipper"),this.increase=b.bind(this.increase,this),this.decrease=b.bind(this.decrease,this),this._events={},this.setIndex(0),this.setLayer(c.Layers.FLIP,this.createTile(this.mf[this.getIndex()])).show()};c.Direction={},c.Layers={},c.Classes={},c.Sets={},c.Direction.UP=1,c.Direction.DOWN=-1,c.Layers.MASK_ABOVE=400,c.Layers.FLIP=300,c.Layers.MASK_BELOW=200,c.Layers.NEXT=100,c.Layers.LAST=101,c.Classes[c.Layers.MASK_ABOVE]="mask",c.Classes[c.Layers.MASK_BELOW]="mask",c.RAM=function(a){function b(){c.RAM.state=c.RAM.state||0,setTimeout(function(){var b=[].slice.call(arguments,0);b.push(c.RAM.state),a.apply(window,b),c.RAM.state+=1e3/60},1e3/60)}switch(!0){case!!window.requestAnimationFrame:window.requestAnimationFrame.apply(window,arguments);break;case!!window.webkitRequestAnimationFrame:window.webkitRequestAnimationFrame.apply(window,arguments);break;case!!window.mozRequestAnimationFrame:window.webkitRequestAnimationFrame.apply(window,arguments);break;case!!window.oRequestAnimationFrame:window.webkitRequestAnimationFrame.apply(window,arguments);break;default:b.apply(window,arguments)}},c.FlipRange=function(a,b){for(var c=[],d=a;b>=d;d++)c.push(d);return c},c.ProgressiveAccelleration=function(){this.speed=1},c.ProgressiveAccelleration.prototype.tick=function(){return this},c.ProgressiveAccelleration.prototype.getSpeed=function(){return this.speed},c.prototype.getIndex=function(){return this.index},c.prototype.setIndex=function(a){this.index=a},c.prototype.increase=function(){var a=this.index+1>=this.mf.length?0:this.index+1;this.setIndex(a)},c.prototype.decrease=function(){var a=this.index-1<=0?this.mf.length-1:this.index-1;this.setIndex(a)},c.prototype.transitionNumbers=function(a,b){var c=this.getIndex(),d=this.getIndex(a());return 0===d&&c>d&&this.trigger("loop"),console.log(this.mf),{current:this.mf[c],after:this.mf[d],speed:b}},c.prototype.createTile=function(a){var c=b(document.createElement("div"));switch(c.addClass("tile-inner"),typeof a){case"number":c.text(a);break;case"string":c.html(a);break;case"object":"function"==typeof a.html?c.html(a.html()):a.outerHTML&&c.html(a.outerHTML)}return c},c.prototype.createHalfTile=function(a){return this.createTile(a).addClass("mask-inner")},c.prototype.setLayer=function(a,d){return this._domLayers[a]&&(this._domLayers[a].remove(),this._domLayers[a]=null),d?(this._domLayers[a]=b(document.createElement("div")),this._domLayers[a].hide().append(d).css("z-index",a).addClass("tile").addClass(c.Classes[a]).appendTo(this.el),this._domLayers[a]):this},c.prototype.getLayer=function(a){return this._domLayers[a]},c.prototype.setupFlip=function(a){this.flipAccelleration=new c.ProgressiveAccelleration,this.setLayer(c.Layers.FLIP,this.createTile(a.current)).show(),this.setLayer(c.Layers.NEXT,this.createTile(a.after)).show(),this.setLayer(c.Layers.MASK_ABOVE,this.createHalfTile(a.current)).addClass("below").show(),this.setLayer(c.Layers.MASK_BELOW,this.createHalfTile(a.current)).addClass("below").show()},c.prototype.flipAway=function(a,d,e,f){var g,d=d||b.Deferred(),h=this.flipAccelleration.getSpeed();if(!f)return c.RAM(b.bind(this.flipAway,this,a,d,null)),d.promise();e=e||f,g=f-e;var i=this.normalRotation(g,a.speed+h,1,-90),j=this.getLayer(c.Layers.FLIP);return i=i>=-90?i:-90,this.rotateDomElement(j.children[0],i),this.flipAccelleration.tick(g),-90===i?d.resolve():void c.RAM(b.bind(this.flipAway,this,a,d,e))},c.prototype.setupFinalFlip=function(a){this.setLayer(c.Layers.MASK_ABOVE,this.createHalfTile(a.after)).addClass("above").show(),this.setLayer(c.Layers.FLIP,this.createTile(a.after))},c.prototype.flipIn=function(a,d,e,f){var g,d=d||b.Deferred(),h=this.flipAccelleration.getSpeed();if(!f)return c.RAM(b.bind(this.flipIn,this,a,d,null)),d.promise();e=e||f,g=f-e;var i=90-this.normalRotation(g,a.speed+h,1,90),j=this.getLayer(c.Layers.FLIP);return i=i>0?i:0,this.rotateDomElement(j.children[0],i),this.flipAccelleration.tick(g),j.show(),0===i?d.resolve(f):void c.RAM(b.bind(this.flipIn,this,a,d,e))},c.prototype.teardown=function(){this.setLayer(c.Layers.MASK_ABOVE,null),this.setLayer(c.Layers.FLIP,null),this.setLayer(c.Layers.NEXT,null),this.setLayer(c.Layers.MASK_BELOW,null)},c.prototype.rotateDomElement=function(a,c){b(a).css("-webkit-transform","rotateX("+c+"deg)")},c.prototype.normalRotation=function(a,b,c,d){return parseInt(a/1e3*b*d/c)},c.prototype.warpSpeed=function(a,b){return Math.pow(b/2-Math.abs(a-b/2)+1,1.25)},c.prototype.flipToNext=function(){var a=this.transitionNumbers(this.increase,1),b=this;this.setupFlip(a),this.flipAway(a).then(function(){b.setupFinalFlip(a),b.flipIn(a)})},c.prototype.run=function(a,b,c){var c,d,e=this;c&&c.flip&&c.flip.speed?d=this.transitionNumbers(a,c.flip.speed):(c=c||1,d=this.transitionNumbers(a,this.warpSpeed(c,b))),this.flip=d,this.setupFlip(d),this.flipAway(d).then(function(){e.setupFinalFlip(d),e.flipIn(d).then(function(){b>c&&(e.teardown(),e.run(a,b,c+1))})})},c.prototype.on=function(a,b){this._events[a]=this._events[a]||[],this._events[a].push(b)},c.prototype.trigger=function(a,c){this._events[a]=this._events[a]||[],b.each(this._events[a],function(a,b){b(c)})};var d=function(a){var d,e,f,g=[];b.extend(a,{digits:2}),d=b(a.el),d.addClass("multiflip");for(var h=0,i=a.digits;i>h;h++)f=b(document.createElement("div")),e=new c(f,c.FlipRange(0,9)),g.push(e),f.prependTo(d),g[h-1]&&g[h-1].on("loop",b.bind(e.run,e,e.increase,1,g[h-1]));this.digits=a.digits,this.currentNumber=0,this.flippers=g};d.prototype.flipTo=function(a){this._performFlip(this.flippers[0],a)},d.prototype._performFlip=function(a,b){var c=b-this.currentNumber;0>c&&(c=Math.pow(10,this.digits)+c),c&&(this.currentNumber=b,a.run(a.increase,Math.abs(c)))},d.Flipper=c,a.NumberFlipper=d}.call(this,this);
//# sourceMappingURL=number-flipper.min.js.map